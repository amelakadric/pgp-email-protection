
<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>pgp encrypt</title>
    <script> $SCRIPT_ROOT = {{ request.script_root|tojson }}; </script>
    <!--<link href="{{ url_for('static', filename='bootstrap.css', _external=True) }}">
    <script src="{{ url_for('static', filename='jQuery.js', _external=True) }}"></script>
    <script src="{{ url_for('static', filename='bootstrap.js', _external=True) }}"></script>
    <script src="{{url_for('static', filename='index.js', _external=True)}}"></script>-->

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

<script>
 window.addEventListener('load', function () {
    let selector = null;
    $("#alt_input1").addClass("collapse");
    $("#alt_input2").addClass("collapse");
    $("#input_type").change(function(){
        selector = ".input_" + $(this).val();
        $("#alt_input1").collapse("hide");
        $("#alt_input2").collapse("hide");
        if (selector == "text") $("#alt_input1").collapse("show");
        else $("#alt_input2").collapse("show");
    }); $("#alt_input1").collapse("show");

    $("#encr_message").click(function() {

        let site_url = "http://localhost:5000"

        console.log($SCRIPT_ROOT)

        let formdata1 = {
            enc_msg: $("#enc_msg").is(':checked'),
            sign: $("#sign").is(":checked"),
            compress: $("#compress").is(":checked"),
            radix64: $("#radix64").is(":checked"),
            text: $("#input_of_type_textarea").val(),
            file: $("#input_of_type_file")[0].files[0],
            text_or_file: $("#input_type").val()
        };

        let formdata2 = {
            type: "POST",
            contentType: "application/json",
            headers: {                                  
                'Accept': 'application/json',
                'Content-Type': 'application/json' 
            },
            data: JSON.stringify(formdata1),
            //body: JSON.stringify(formdata1),     
            dataType: 'json',
            url: "http://localhost:5000/encr_api",
            success: function(data) {
                console.log(JSON.stringify(data));
            }
        };
        $.ajax(formdata2);

    });

});
</script>

</head>
<body>
<br/><br/><br/>
<form><div class="container text-center">
    <div class="row">
        <div id="alt_input1">
            <div class="col">
                <span class="input-group-text">Enter your message here</span>
                <textarea class="form-control" aria-label="With textarea" id="input_of_type_textarea"></textarea>
            </div>
        </div>
        <div id="alt_input2">
            <div class="col">
                <label for="input_of_type_file" class="form-label">Select the file with your message</label>
                <input class="form-control form-control-lg text-success" id="input_of_type_file" type="file" />
            </div>
        </div>
    </div>
    <div class="row"><div class="col"><br/></div></div>
    <div class="row">
        <div class="col">
            <input type="checkbox" class="btn-check" id="enc_msg" autocomplete="off">
            <label class="btn btn-outline-success" for="enc_msg">encrypt message</label> <br/><br/>
        </div>
        <div class="col">
            <input type="checkbox" class="btn-check" id="sign" autocomplete="off">
            <label class="btn btn-outline-success" for="sign">sign message</label> <br/><br/>
        </div>
        <div class="col">
            <input type="checkbox" class="btn-check" id="compress" autocomplete="off">
            <label class="btn btn-outline-success" for="compress">compress message</label> <br/><br/>
        </div>
        <div class="col">
            <input type="checkbox" class="btn-check" id="radix64" autocomplete="off">
            <label class="btn btn-outline-success" for="radix64">convert to radix64</label> <br/><br/>
        </div>
    </div>

    <div class="row">
        <div class="col"></div>
        <div class="col">
            <select class="form-select form-select mb-3" aria-label="Large select example" id="input_type">
                <option value="text">text</option>
                <option value="file">file</option>
            </select>
        </div>
        <div class="col"></div>
        <div class="col"><button type="button" class="btn btn-success" id="encr_message">Submit</button></div>
        <div class="col"></div>
    </div>
</div></form>
</body>
</html>

